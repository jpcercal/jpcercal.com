{{ $baseURL         := .Site.BaseURL }}
{{ $locale          := .Site.Params.locale }}
{{ $datetime        := .Date.Format "2006-01-02" }}
{{ $datetimeDisplay := .Date.Format "Jan 2, 2006" }}
{{ $categoryAlias   := index .Params.categories 0 }}
{{ $category        := index .Site.Data.categories $categoryAlias }}
{{ $directory       := "content/posts/" }}
{{ $filename        := "index.jpg" }}
{{ $cover           := where (readDir (printf "%s%s" $directory .Slug)) "Name" $filename }}
{{ $img             := printf "%s%s" $baseURL "images/icons/tag.svg" }}

{{ if $cover }}
    {{ $img := printf "%s%s/%s" $baseURL .Slug $filename }}
{{ end }}

<article class="post-card mb-4">
    <div class="flex-row d-flex">
        <div class="flex-column m-3">
            <img class="rounded-circle" src="{{ $img }}" alt="{{ .Title }}" height="60px" width="60px">
        </div>
        <header class="flex-column m-0">
            <a class="mt-3 mb-1 post-card--title" href="{{ .Permalink }}">{{ .Title }}</a>

            <ul class="list-inline">
                <li class="list-inline-item d-inline">
                    <time datetime="{{ $datetime }}">{{ $datetimeDisplay }}</time>
                </li>
                <li class="list-inline-item d-none d-sm-inline">
                    <span>{{ partial "word-count.html" . }}</span>
                </li>
                <li class="list-inline-item d-none d-sm-inline">
                    <span>{{ partial "reading-time.html" . }}</span>
                </li>
            </ul>

            {{ if $category }}
                <a class="post-card--category d-none d-md-inline" href="{{ $baseURL }}categories/{{ $categoryAlias | urlize }}">{{ index (index $category "title") $locale }}</a>
            {{ end }}
            <p class="mt-2 mb-3 mr-2">{{ .Description }}</p>
        </header>
    </div>
</article>
