 <!doctype html> <html itemscope itemtype=http://schema.org/Article lang=en prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"> <head> <title>Revisiting the layout and the Blog project | jpcercal.com</title> <meta charset=utf-8> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport> <link href=https://jpcercal.com/en/revisiting-the-layout-and-the-blog-project/ rel=canonical><meta content=summary_large_image name=twitter:card> <meta content=https://jpcercal.com/ name=twitter:domain> <meta content=https://jpcercal.com/revisiting-the-layout-and-the-blog-project/index.png name=twitter:image:src> <meta content="Revisiting the layout and the Blog project | jpcercal.com" name=twitter:title> <meta content="A project/proof of concept that has been shown good results, it’s about a migration from a PHP website to a static blog, no server costs anymore and web-optimized. Check out a few implementation details." name=twitter:description> <meta content=jpcercal name=twitter:creator> <meta content="Others, News, CMS, SEO, Framework, Wordpress, How to do that, Git" name=news_keywords> <meta content="Revisiting the layout and the Blog project | jpcercal.com" itemprop=name> <meta content="A project/proof of concept that has been shown good results, it’s about a migration from a PHP website to a static blog, no server costs anymore and web-optimized. Check out a few implementation details." itemprop=description> <meta content="A project/proof of concept that has been shown good results, it’s about a migration from a PHP website to a static blog, no server costs anymore and web-optimized. Check out a few implementation details." name=description><meta content=2019-03-12T21:33:54+00:00 itemprop=dateModified><meta content=1418 itemprop=wordCount> <meta content=https://jpcercal.com/revisiting-the-layout-and-the-blog-project/index.png itemprop=image><meta content="Others, News, CMS, SEO, Framework, Wordpress, How to do that, Git" itemprop=keywords> <meta content="Revisiting the layout and the Blog project | jpcercal.com" property=og:title> <meta content="A project/proof of concept that has been shown good results, it’s about a migration from a PHP website to a static blog, no server costs anymore and web-optimized. Check out a few implementation details." property=og:description> <meta content=https://jpcercal.com/en/revisiting-the-layout-and-the-blog-project/ property=og:url> <meta content=https://jpcercal.com/revisiting-the-layout-and-the-blog-project/index.png property=og:image> <meta content=en property=og:locale> <meta content=jpcercal.com property=og:site_name> <meta content=article property=og:type> <meta content=2019-03-12T21:33:54+00:00 property=article:published_time><meta content=https://www.facebook.com/jpcercal property=article:author> <meta content=https://www.facebook.com/jpcercal.com property=article:publisher> <meta content=posts property=article:section> <meta content=Others property=article:tag> <meta content=News property=article:tag> <meta content=CMS property=article:tag> <meta content=SEO property=article:tag> <meta content=Framework property=article:tag> <meta content=Wordpress property=article:tag> <meta content="How to do that" property=article:tag> <meta content=Git property=article:tag><meta content=1533275266791178 property=fb:app_id> <link href=https://jpcercal.com/images/favicon/apple-icon-57x57.png rel=apple-touch-icon sizes=57x57> <link href=https://jpcercal.com/images/favicon/apple-icon-60x60.png rel=apple-touch-icon sizes=60x60> <link href=https://jpcercal.com/images/favicon/apple-icon-72x72.png rel=apple-touch-icon sizes=72x72> <link href=https://jpcercal.com/images/favicon/apple-icon-76x76.png rel=apple-touch-icon sizes=76x76> <link href=https://jpcercal.com/images/favicon/apple-icon-114x114.png rel=apple-touch-icon sizes=114x114> <link href=https://jpcercal.com/images/favicon/apple-icon-120x120.png rel=apple-touch-icon sizes=120x120> <link href=https://jpcercal.com/images/favicon/apple-icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=https://jpcercal.com/images/favicon/apple-icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=https://jpcercal.com/images/favicon/apple-icon-180x180.png rel=apple-touch-icon sizes=180x180> <link href=https://jpcercal.com/images/favicon/android-icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=https://jpcercal.com/images/favicon/manifest.json rel=manifest> <meta content=#ffffff name=msapplication-TileColor> <meta content=https://jpcercal.com/images/favicon/ms-icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <link href=https://jpcercal.com/images/favicon/favicon.ico rel="shortcut icon"> <script>window.baseUrl="https://jpcercal.com/",window.locale="en"</script> <link href="https://fonts.googleapis.com/css?family=Fjalla+One%7cBarlow+Condensed:400,500%7cPT+Serif:400,400i,700,700i%7cFira+Mono:400,500,700" rel=stylesheet> <link href=https://jpcercal.com/css/vendor.min.css rel=stylesheet> <link href=https://jpcercal.com/css/jpcercal.com.min.css rel=stylesheet> <link href=https://jpcercal.com/css/syntax-highlight.min.css rel=stylesheet> <script src="https://www.googletagmanager.com/gtag/js?id=G-S1125GQLTK" async></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-S1125GQLTK")</script></head> <body> <header class=container> <div class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <div class="row align-items-center header"> <div class="col search"> <a href=https://jpcercal.com/en/search class=search-link> <span class=search-icon></span> <span class="d-none d-sm-inline">Search for</span> </a> </div> <div class=col> <a href=https://jpcercal.com/en/ class="m-0 brand font-size-h3 text-center">jpcercal.com</a> </div> <div class="col clearfix"> <nav class=float-right> <ul class="list-inline list-unstyled locale-list m-0"> <li class="list-inline-item locale-list-item"> <a href=https://jpcercal.com/ class="d-none d-lg-inline">Portuguese</a> <a href=https://jpcercal.com/ class=d-lg-none title=Portuguese>PT</a> </li> <li class="list-inline-item locale-list-item locale-list-item--active"> <a href=# class="d-none d-lg-inline">English</a> <a href=# class=d-lg-none title=English>EN</a> </li> </ul> </nav> </div> </div> </div> </div> <a href=https://github.com/jpcercal/jpcercal.com class="d-none d-lg-inline github-corner" title="View source on GitHub" aria-label="View source on GitHub"> <img alt="View source on GitHub" src=https://jpcercal.com/images/icons/github-corner-right.svg> </a> </header> <article class=container> <header class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <div class=float-left> <img alt="João Paulo Cercal" src=https://jpcercal.com/authors/jpcercal/thumbnail.jpg class=rounded-circle height=60 width=60> </div> <div class="float-left ml-2"> <a href=https://jpcercal.com/en/authors/jpcercal class="font-size-h6 author-name" rel=author>João Paulo Cercal</a> <p class=author-position>Software Engineer at Spectrm in Berlin, Germany</p> <ul class=list-inline> <li class="list-inline-item d-inline"> <time datetime=2019-03-12>Mar 12, 2019</time> </li> <li class="list-inline-item d-none d-sm-inline"> <span>1418 words</span> </li> <li class="list-inline-item d-none d-sm-inline"> <span>7 min read</span> </li> <li class="list-inline-item d-inline"> <a href=https://jpcercal.com/en/categories/other>Others</a> </li> </ul> </div> </div> </header> <div class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <h1 class="mb-3 font-size-h1 mt-2">Revisiting the layout and the Blog project</h1> <ul class="list-inline list-unstyled article-share-buttons mb-3 mt-1"> <li class=list-inline-item> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f&quote=Revisiting%20the%20layout%20and%20the%20Blog%20project%20%7c%20jpcercal.com" title="Share on Facebook" target=_blank> <img alt="Share on Facebook" src=https://jpcercal.com/images/icons/share-buttons/facebook.svg> </a> </li> <li class=list-inline-item> <a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f&text=Revisiting%20the%20layout%20and%20the%20Blog%20project%20%7c%20jpcercal.com:%20https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f&via=jpcercal" title="Share on Twitter" target=_blank> <img alt="Share on Twitter" src=https://jpcercal.com/images/icons/share-buttons/twitter.svg> </a> </li> <li class=list-inline-item> <a href="https://plus.google.com/share?url=https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f" title="Share on Google+" target=_blank> <img alt="Share on Google+" src=https://jpcercal.com/images/icons/share-buttons/google-plus.svg> </a> </li> <li class=list-inline-item> <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f&title=Revisiting%20the%20layout%20and%20the%20Blog%20project%20%7c%20jpcercal.com&summary=A%20project%2fproof%20of%20concept%20that%20has%20been%20shown%20good%20results%2c%20it%e2%80%99s%20about%20a%20migration%20from%20a%20PHP%20website%20to%20a%20static%20blog%2c%20no%20server%20costs%20anymore%20and%20web-optimized.%20Check%20out%20a%20few%20implementation%20details.&source=https%3a%2f%2fjpcercal.com%2fen%2frevisiting-the-layout-and-the-blog-project%2f" title="Share on LinkedIn" target=_blank> <img alt="Share on LinkedIn" src=https://jpcercal.com/images/icons/share-buttons/linkedin.svg> </a> </li> </ul> <div class="font-size-h6 article-content"> <p>Hello dear visitor, a long time ago I had the desire to revisit the Blog layout, however, conciliate attention to my family and write are not things that could be done at the same time, because, both of them requires dedication.</p> <p>Well, technically speaking, the goal was to give back to the open-source community something and so the source code is hosted on GitHub. You can use it to inspire yourself by taking this project as a solid base or even as a starting point.</p> <blockquote> <p>Are you curious and would love to take a look into the source code? Then, follow the <a href=https://github.com/jpcercal/jpcercal.com>repository link</a>, give me a star there. Also, why not create a fork of the repo? Did you find a bug? Open an issue or even better if you send a PR. ❤️</p> </blockquote> <p>When I started this migration project in the middle of 2017, the blog was running on top of <a href=https://wordpress.org/ >Wordpress</a> 3.4 and, as a dependency, a server was required in order to render the content (if you’re used to I’m talking about a <a href=https://www.ibm.com/cloud/learn/lamp-stack-explained>LAMP</a> stack). That being said, I had to move all the content from the previous website to markdown files, in the end the main points that made me think about this migration were:</p> <ul> <li>No scripts running on the server-side</li> <li>No relational database to give me the content</li> <li>Have a static website generator and publish the pages to <a href=https://pages.github.com/ >Git Pages</a></li> <li>Have a search system with score definition per content based on text files</li> <li>Have versioning of all posts</li> <li>Have support to multi-language (English and Brazilian Portuguese)</li> <li>Support to <a href=https://www.cloudflare.com/learning/ssl/what-is-ssl/ >SSL</a></li> <li>Create links between posts, authors, categories and tags</li> <li>Write posts in <em>markdown</em> file</li> <li>Move the legacy content from <a href=https://www.mysql.com/ >MySQL</a></li> <li>Compile and compress the source code during the build</li> <li>Otimize the page loading time as well as simulate search results from Google search page</li> <li>Creation of content drafts</li> <li>Preview of posts</li> <li>Migrate to a new domain <code>.io</code></li> <li>Reorganize the navigation strategy</li> <li>Creation of a minimalist layout giving focus to the content</li> <li>Development environment based on <a href=https://www.docker.com/ >Docker</a> containers</li> </ul> <h2 id=just-in-case-it-just-works>Just in case, it just works!</h2> <p><em>Yeap</em>, it’s true that a server-side technology could make a few things easier, but you have to pay the price. 💰</p> <blockquote> <p>It’s exactly at this point that this project succeeds.</p> </blockquote> <p>At the same time, I didn’t need a relational database instance to give me the data anymore.</p> <p>Another advantage of this approach is that there’s no script/data processing on the server-side, all the files are already waiting to be accessed and they’re compiled and web-opmized. Well, they’re just waiting for you there. 🏎</p> <p>A disadvantage, but not really, is that there’s no way to perform <em>queries</em> in a relational database to search for a post, right? So, what happens in case a visitor searches for something? Good question by the way, another tool came in to solve this specific problem, take a close look into <a href=https://lunrjs.com/ >Lunr</a>.</p> <blockquote> <p>An index file is created during the build time by this <a href=https://gruntjs.com/ >grunt</a> <a href=https://github.com/jpcercal/jpcercal.com/blob/master/grunt-custom/lunr.js>task</a>, after <a href=https://github.com/jpcercal/jpcercal.com/blob/master/assets/js/search.js>a JS file implements the search module</a>, uses the search index created before, defines scores to each content field and, finally it searches for your search terms. Beautiful!</p> </blockquote> <h2 id=markdown-files>Markdown files</h2> <p>Those files defined either by the <code>.md</code> or <code>.markdown</code> extension are no more no less than text files.</p> <p>The big advantage is about editors and tools as they are quite common for taking notes and even to write books, there’s no doubt that you could be well served to work with your text files on your smartphone, tablet, laptop or PC, you can always be writing something if you want to.</p> <p>As this format is popular, why should we insist in maintaining a relational database for a simple blog? I thought that I should not and by mixing the flexibility of those files with a <a href=https://git-scm.com/ >git</a> repository I could have my own data text database. Done! Now, I have version control for all the changes that I made and so if needed I could undo things easily or just check how the project looked like a time ago. Keep in mind that even the more advanced CMSs usually don’t allow you to do it.</p> <p>Perfect, isn’t it? Even better, I can create content in the language that I want, I just have to open the post content in the language that I want to and start typing, if you got interested in take a look into the repo where you can see translation for “static” parts of the site like menus, links, etc:</p> <ul> <li><a href=https://github.com/jpcercal/jpcercal.com/blob/master/i18n/en.yaml>jpcercal/jpcercal.com/i18n/en.yaml</a></li> <li><a href=https://github.com/jpcercal/jpcercal.com/blob/master/i18n/en.yaml>jpcercal/jpcercal.com/i18n/en.yaml</a></li> </ul> <p>And translated post content:</p> <ul> <li><a href=https://github.com/jpcercal/jpcercal.com/blob/master/content/posts/composer-clear-cache/index.en.md>jpcercal/jpcercal.com/content/posts/composer-clear-cache/index.en.md</a></li> <li><a href=https://github.com/jpcercal/jpcercal.com/blob/master/content/posts/composer-clear-cache/index.md>jpcercal/jpcercal.com/content/posts/composer-clear-cache/index.md</a></li> </ul> <h2 id=development-environment-and-tests>Development environment and tests</h2> <p>The development environment is based on docker containers and so the only thing you have to install locally is Docker, after having it installed, you just need an active internet connection to download the images for the first execution.</p> <blockquote> <p>You can find more details about the entire installation process as well the guide about how to use the service into the repo <a href=https://github.com/jpcercal/jpcercal.com/ >jpcercal/jpcercal.com</a>.</p> </blockquote> <h2 id=travis-ci>Travis CI</h2> <p>As any other great developer, I created a pipeline to automate the deployment process, thanks to the guys from <a href=https://docs.travis-ci.com/user/for-beginners/ >Travis CI</a> for giving an excellent tool to the community, at least to solve my case.</p> <blockquote> <p>If you got seriously curious about how the pipeline looks like and what it does, pass by and check it out on <a href=https://travis-ci.org/jpcercal/jpcercal.com>Travis-CI jpcercal/jpcercal.com</a>.</p> </blockquote> <p>What happens there in a nutshell, Travis opens the file <a href=https://github.com/jpcercal/jpcercal.com/blob/master/.travis.yml>.travis.yml</a> defined on the repository root folder and it runs the tasks that got defined there. The most important steps are listed below:</p> <ul> <li>Install dependencies</li> <li>Generate the static site in production mode (it includes among other things the assets optimization)</li> <li>Publish the artefacts generated before</li> <li>Verify the resulted build by performing a live test using <a href=https://developers.google.com/speed/pagespeed/insights/ >Google Page Speed</a> tool</li> </ul> <h2 id=other-tools>Other tools</h2> <p>It’s nice to say that our <a href=https://www.cloudflare.com/learning/dns/what-is-dns/ >DNS</a> points out to <a href=https://www.cloudflare.com/ >Cloudflare</a>, they offer a good service that optimizes your assets, protects you against <a href=https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/ >DDoS</a> attack and offer a SSL certificate all included in a free subscription plan. 😇</p> <p>Hey <a href=https://gohugo.io/ >Hugo</a>, thank you! No, it’s not a person, but one of the fastest frameworks for building static websites, it’s written on <a href=https://golang.org/ >Golang</a> and you guessed right, we’re using it.</p> <h2 id=homepage>Homepage</h2> <p>Along the way I noticed that the web components disposition on the previous layouts were not that good and the proposals were focusing on the layout itself and not on the content as it should be, it was trying to show things to the visitors that they were not interested in, this is the problem that the new minimalist layout tries to solve.</p> <p>Take a look below in a screenshot taken from the homepage in the moment that I was writing this post.</p> <p><img alt=Homepage src=homepage.en.png></p> <blockquote> <p>The images talks by itself, it’s clean and nice to read the content, however, there’s too much black related colors, I have the feeling that I still need to adjust it, talking about adjustments, I always want to change something there. 🚀</p> </blockquote> <h2 id=next-steps>Next steps</h2> <p>Good! But I want to refactor a few parts yet, nevertheless, I’m quite satisfied with the results.</p> <p>What started as a proof of concept now is my personal blog, it works and it works VERY well, the only concern that I have today is that I need a computer in order to publish something.</p> <blockquote> <p>I could be using an app for my iOS device to manage GIT repositories, but I don’t want to.</p> </blockquote> <p>Another point that bothers me are the headers of each post content file, they are defined as follows:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><code class=language-yaml data-lang=yaml> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</code></pre></div><td class=code><div class=highlight><pre><span></span><span class=nn>---</span>
<span class=nt>draft</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=nt>author</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">jpcercal@gmail.com</span>
<span class=nt>slug</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">my-slug</span>
<span class=nt>title</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">My Title</span>
<span class=nt>date</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">2019-03-20T10:08:56+00:00</span>
<span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">My description</span>
<span class=nt>categories</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">other</span>
<span class=nt>tags</span><span class=p>:</span> 
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">apple</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">osx</span>
<span class=nn>---</span>
</pre></div> </table> <blockquote> <p>The problem actually might be the editor that I’ve been using for writing the posts, <a href=https://ia.net/writer>iA Writer</a> (for Mac and iOS) does not hide the metadata shown above, if you have any trick how to solve it, then drop me a comment!</p> </blockquote> <p>To wrap this post up, I would love to finish it within a quote of someone that I liked a lot by his perfectionism and attention to details, the lord of apples.</p> <blockquote> <p>One way to remember who you are is to remember who your heroes are, Steve Jobs.</p> </blockquote> <p>If you want to talk about this adventure or even about the challenge and issues that I had along the way, drop me a message, I would feel really good to inspire any of your ideas <em>developers developers developers</em>, if I did, please tell me! See ya. 😉</p> </div> <ul class="list-inline list-unstyled article-tags"> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/news>News</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/cms>CMS</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/seo>SEO</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/framework>Framework</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/wordpress>Wordpress</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/howto>How to do that</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/en/tags/git>Git</a> </li> </ul> <div id=disqus></div> </div> </div> </article> <script src=https://jpcercal.com/js/jpcercal.com.min.js async></script> <script>document.addEventListener("DOMContentLoaded",function(){disqusLoader("#disqus",{scriptUrl:"//cercal-io.disqus.com/embed.js",disqusConfig:function(){this.page.identifier="revisiting-the-layout-and-the-blog-project",this.page.title="Revisiting the layout and the Blog project",this.page.url="https://jpcercal.com/en/revisiting-the-layout-and-the-blog-project/"}})})</script> <script src=https://jpcercal.com/vendor/js/disqus-loader.min.js></script> 