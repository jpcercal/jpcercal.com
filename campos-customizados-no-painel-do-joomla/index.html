 <!doctype html> <html itemscope itemtype=http://schema.org/Article lang=pt prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"> <head> <title>Campos Customizados no painel do Joomla | jpcercal.com</title> <meta charset=utf-8> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport> <link href=https://jpcercal.com/campos-customizados-no-painel-do-joomla/ rel=canonical><meta content=summary_large_image name=twitter:card> <meta content=https://jpcercal.com/ name=twitter:domain> <meta content=https://jpcercal.com/campos-customizados-no-painel-do-joomla/index.png name=twitter:image:src> <meta content="Campos Customizados no painel do Joomla | jpcercal.com" name=twitter:title> <meta content="Aprenda a criar campos customizados para o painel do Joomla 1.6, para isto você deve extender uma classe do Joomla que seja descendente de JFormField." name=twitter:description> <meta content=jpcercal name=twitter:creator> <meta content="PHP, CMS, Joomla" name=news_keywords> <meta content="Campos Customizados no painel do Joomla | jpcercal.com" itemprop=name> <meta content="Aprenda a criar campos customizados para o painel do Joomla 1.6, para isto você deve extender uma classe do Joomla que seja descendente de JFormField." itemprop=description> <meta content="Aprenda a criar campos customizados para o painel do Joomla 1.6, para isto você deve extender uma classe do Joomla que seja descendente de JFormField." name=description><meta content=2011-10-10T17:32:40+00:00 itemprop=dateModified><meta content=420 itemprop=wordCount> <meta content=https://jpcercal.com/campos-customizados-no-painel-do-joomla/index.png itemprop=image><meta content="PHP, CMS, Joomla" itemprop=keywords> <meta content="Campos Customizados no painel do Joomla | jpcercal.com" property=og:title> <meta content="Aprenda a criar campos customizados para o painel do Joomla 1.6, para isto você deve extender uma classe do Joomla que seja descendente de JFormField." property=og:description> <meta content=https://jpcercal.com/campos-customizados-no-painel-do-joomla/ property=og:url> <meta content=https://jpcercal.com/campos-customizados-no-painel-do-joomla/index.png property=og:image> <meta content=pt property=og:locale> <meta content=jpcercal.com property=og:site_name> <meta content=article property=og:type> <meta content=2011-10-10T17:32:40+00:00 property=article:published_time><meta content=https://www.facebook.com/jpcercal property=article:author> <meta content=https://www.facebook.com/jpcercal.com property=article:publisher> <meta content=posts property=article:section> <meta content=PHP property=article:tag> <meta content=CMS property=article:tag> <meta content=Joomla property=article:tag><meta content=1533275266791178 property=fb:app_id> <link href=https://jpcercal.com/images/favicon/apple-icon-57x57.png rel=apple-touch-icon sizes=57x57> <link href=https://jpcercal.com/images/favicon/apple-icon-60x60.png rel=apple-touch-icon sizes=60x60> <link href=https://jpcercal.com/images/favicon/apple-icon-72x72.png rel=apple-touch-icon sizes=72x72> <link href=https://jpcercal.com/images/favicon/apple-icon-76x76.png rel=apple-touch-icon sizes=76x76> <link href=https://jpcercal.com/images/favicon/apple-icon-114x114.png rel=apple-touch-icon sizes=114x114> <link href=https://jpcercal.com/images/favicon/apple-icon-120x120.png rel=apple-touch-icon sizes=120x120> <link href=https://jpcercal.com/images/favicon/apple-icon-144x144.png rel=apple-touch-icon sizes=144x144> <link href=https://jpcercal.com/images/favicon/apple-icon-152x152.png rel=apple-touch-icon sizes=152x152> <link href=https://jpcercal.com/images/favicon/apple-icon-180x180.png rel=apple-touch-icon sizes=180x180> <link href=https://jpcercal.com/images/favicon/android-icon-192x192.png rel=icon sizes=192x192 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-32x32.png rel=icon sizes=32x32 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-96x96.png rel=icon sizes=96x96 type=image/png> <link href=https://jpcercal.com/images/favicon/favicon-16x16.png rel=icon sizes=16x16 type=image/png> <link href=https://jpcercal.com/images/favicon/manifest.json rel=manifest> <meta content=#ffffff name=msapplication-TileColor> <meta content=https://jpcercal.com/images/favicon/ms-icon-144x144.png name=msapplication-TileImage> <meta content=#ffffff name=theme-color> <link href=https://jpcercal.com/images/favicon/favicon.ico rel="shortcut icon"> <script>window.baseUrl="https://jpcercal.com/",window.locale="pt"</script> <link href="https://fonts.googleapis.com/css?family=Fjalla+One%7cBarlow+Condensed:400,500%7cPT+Serif:400,400i,700,700i%7cFira+Mono:400,500,700" rel=stylesheet> <link href=https://jpcercal.com/css/vendor.min.css rel=stylesheet> <link href=https://jpcercal.com/css/jpcercal.com.min.css rel=stylesheet> <link href=https://jpcercal.com/css/syntax-highlight.min.css rel=stylesheet> <script src="https://www.googletagmanager.com/gtag/js?id=G-S1125GQLTK" async></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-S1125GQLTK")</script></head> <body> <header class=container> <div class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <div class="row align-items-center header"> <div class="col search"> <a href=https://jpcercal.com/search class=search-link> <span class=search-icon></span> <span class="d-none d-sm-inline">Procurar por</span> </a> </div> <div class=col> <a href=https://jpcercal.com/ class="m-0 brand font-size-h3 text-center">jpcercal.com</a> </div> <div class="col clearfix"> <nav class=float-right> <ul class="list-inline list-unstyled locale-list m-0"> <li class="list-inline-item locale-list-item locale-list-item--active"> <a href=# class="d-none d-lg-inline">Português</a> <a href=# title=Português class=d-lg-none>PT</a> </li> <li class="list-inline-item locale-list-item"> <a href=https://jpcercal.com/en class="d-none d-lg-inline">Inglês</a> <a href=https://jpcercal.com/en title=Inglês class=d-lg-none>EN</a> </li> </ul> </nav> </div> </div> </div> </div> <a href=https://github.com/jpcercal/jpcercal.com title="Ver código-fonte no GitHub" class="d-none d-lg-inline github-corner" aria-label="Ver código-fonte no GitHub"> <img alt="Ver código-fonte no GitHub" src=https://jpcercal.com/images/icons/github-corner-right.svg> </a> </header> <article class=container> <header class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <div class=float-left> <img alt="João Paulo Cercal" src=https://jpcercal.com/authors/jpcercal/thumbnail.jpg class=rounded-circle height=60 width=60> </div> <div class="float-left ml-2"> <a href=https://jpcercal.com/authors/jpcercal class="font-size-h6 author-name" rel=author>João Paulo Cercal</a> <p class=author-position>Software Engineer na Spectrm em Berlim, Alemanha</p> <ul class=list-inline> <li class="list-inline-item d-inline"> <time datetime=2011-10-10>Oct 10, 2011</time> </li> <li class="list-inline-item d-none d-sm-inline"> <span>420 palavras</span> </li> <li class="list-inline-item d-none d-sm-inline"> <span>2 min de leitura</span> </li> <li class="list-inline-item d-inline"> <a href=https://jpcercal.com/categories/php>PHP</a> </li> </ul> </div> </div> </header> <div class=row> <div class="col col-lg-10 col-xl-8 offset-lg-1 offset-xl-2"> <h1 class="mb-3 font-size-h1 mt-2">Campos Customizados no painel do Joomla</h1> <ul class="list-inline list-unstyled article-share-buttons mb-3 mt-1"> <li class=list-inline-item> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f&quote=Campos%20Customizados%20no%20painel%20do%20Joomla%20%7c%20jpcercal.com" title="Share on Facebook" target=_blank> <img alt="Share on Facebook" src=https://jpcercal.com/images/icons/share-buttons/facebook.svg> </a> </li> <li class=list-inline-item> <a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f&text=Campos%20Customizados%20no%20painel%20do%20Joomla%20%7c%20jpcercal.com:%20https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f&via=jpcercal" title="Share on Twitter" target=_blank> <img alt="Share on Twitter" src=https://jpcercal.com/images/icons/share-buttons/twitter.svg> </a> </li> <li class=list-inline-item> <a href="https://plus.google.com/share?url=https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f" title="Share on Google+" target=_blank> <img alt="Share on Google+" src=https://jpcercal.com/images/icons/share-buttons/google-plus.svg> </a> </li> <li class=list-inline-item> <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f&title=Campos%20Customizados%20no%20painel%20do%20Joomla%20%7c%20jpcercal.com&summary=Aprenda%20a%20criar%20campos%20customizados%20para%20o%20painel%20do%20Joomla%201.6%2c%20para%20isto%20voc%c3%aa%20deve%20extender%20uma%20classe%20do%20Joomla%20que%20seja%20descendente%20de%20JFormField.&source=https%3a%2f%2fjpcercal.com%2fcampos-customizados-no-painel-do-joomla%2f" title="Share on LinkedIn" target=_blank> <img alt="Share on LinkedIn" src=https://jpcercal.com/images/icons/share-buttons/linkedin.svg> </a> </li> </ul> <div class="font-size-h6 article-content"> <p>Olá, hoje tive a necessidade de adicionar um campo personalizado no painel de administração do <a href=http://www.joomla.org/ title=Joomla>Joomla</a> 1.6 para uso de um componente que estava desenvolvendo, decidi compartilhar aqui em meu blog a <em>“receita do bolo”</em>.</p> <p>Este tutorial foi desenvolvido tendo como base a <a href=http://docs.joomla.org/Creating_a_custom_form_field_type title="Documentação Oficial do Joomla">Documentação Oficial do Joomla</a>.</p> <p>Para criar um tipo de <strong>campo customizado</strong> para o <em>Joomla 1.6</em> você deve criar uma classe que extenda de um tipo de campo já definido pelo próprio <em>Joomla</em> (<em>media</em>, <em>text</em>, etc), ou então, a classe base para esta funcionalidade que é <em>“JFormField”</em>.</p> <p>Os tipos de campos definidos pelo próprio <em>Joomla</em> estão presentes no seguinte diretório:</p> <ul> <li><em>joomla/libraries/joomla/form/fields/</em></li> </ul> <p>Iremos criar um campo específico para resgatar três cidades, para isso, crie um arquivo chamado <em>“cidade.php”</em> dentro de <em>administrator/components/nome-do-seu-componente/models/fields/cidade.php</em> e adicione o seguinte código:</p> <p>O nome da classe deve ser prefixado com <em>“JFormField”</em> seguindo do seu nome de arquivo físico que neste caso chama-se <em>“cidade.php”</em>, logo, o nome da classe será <em>“JFormFieldCidade”</em> utilizando o padrão <a href=https://jpcercal.com/o-padrao-camelcase/ title="O Padrão CamelCase">CamelCase</a>.</p> <p>Dois métodos podem ser implementados pela nossa classe <em>“Cidade”</em>, são eles:</p> <ul> <li><code>getLabel()</code></li> <li><code>getInput()</code></li> </ul> <p>Ambos devem retornar um <a href=https://jpcercal.com/introducao-a-linguagem-html/ title="Introdução a Linguagem HTML">HTML</a>.</p> <p>O método protegido <code>getLabel()</code> retornará o <em>label</em> para o nosso campo customizado, ele em muitos casos não é necessário, pois a classe de que extendemos já escreve essa funcionalidade. Em contrapartida, o método <em>getInput()</em>, deve retornar o <em>html</em> do campo, podendo ser por exemplo um <em>input</em>(<em>text</em>, <em>radio</em>, etc), ou <em>select</em>.</p> <p>Veja como ficou nossa classe:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><code class=language-php data-lang=php> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</code></pre></div><td class=code><div class=highlight><pre><span></span><span class=cp>&lt;?php</span>

<span class=c1>// Importa a classe JFormField, da qual iremos extender</span>
<span class=nx>jimport</span><span class=p>(</span><span class=s1>'joomla.form.formfield'</span><span class=p>);</span>

<span class=k>class</span> <span class=nc>JFormFieldCidade</span> <span class=k>extends</span> <span class=nx>JFormField</span>
<span class=p>{</span>
  <span class=c1>// O valor da propriedade $type deve conter</span>
  <span class=c1>// o sufixo da classe nesse caso "Cidade"</span>
  <span class=k>protected</span> <span class=nv>$type</span> <span class=o>=</span> <span class=s1>'Cidade'</span><span class=p>;</span>

  <span class=k>protected</span> <span class=k>function</span> <span class=nf>getInput</span><span class=p>()</span>
  <span class=p>{</span>
    <span class=k>return</span> <span class=s1>'&lt;select name="'</span><span class=o>.</span><span class=nv>$this</span><span class=o>-></span><span class=na>name</span><span class=o>.</span><span class=s1>'">'</span><span class=o>.</span>
      <span class=s1>'&lt;option value="1" >Joinville&lt;/option>'</span><span class=o>.</span>
      <span class=s1>'&lt;option value="2" >São Francisco do Sul&lt;/option>'</span><span class=o>.</span>
      <span class=s1>'&lt;option value="3" >Itajaí&lt;/option>'</span><span class=o>.</span>
      <span class=s1>'&lt;/select>'</span>
    <span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>
<span class=cp>?></span><span class=x></span>
</pre></div> </table> <p>Dentro do seu código, você terá que processar os atributos definidos pelo usuário na definição do formulário <strong>XML</strong>. Alguns desses atributos são acessíveis através de variáveis membros protegidas de <em>JFormField</em>.</p> <p>Por exemplo, o atributo <em>name</em> está disponível em seu código da seguinte forma <em>$this->name</em>. Da mesma maneira está: <em>label</em>, <em>description</em>, <em>default</em>, <em>multiple</em> e <em>class</em>.</p> <p>Outros parâmetros que você pode ter definido podem ser acessados através de <em>$this->element</em> sendo que este é um <em>array</em>, as chaves desse <em>array</em> são associativas e recebem o nome da propriedade. Por exemplo o atributo <em>size</em> seria acessado assim: <em>$this->element[‘size’]</em>.</p> <p>O seu <em>XML</em> ficaria dessa forma:</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><code class=language-xml data-lang=xml>1</code></pre></div><td class=code><div class=highlight><pre><span></span><span class=nt>&lt;field</span> <span class=na>name=</span><span class=s>"cidade"</span> <span class=na>type=</span><span class=s>"cidade"</span> <span class=na>label=</span><span class=s>"Cidade"</span> <span class=na>description=</span><span class=s>"Cidades disponíveis"</span> <span class=nt>/></span>
</pre></div> </table> </div> <ul class="list-inline list-unstyled article-tags"> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/tags/cms>CMS</a> </li> <li class="list-inline-item article-tag"> <a href=https://jpcercal.com/tags/joomla>Joomla</a> </li> </ul> <div id=disqus></div> </div> </div> </article> <script src=https://jpcercal.com/js/jpcercal.com.min.js async></script> <script>document.addEventListener("DOMContentLoaded",function(){disqusLoader("#disqus",{scriptUrl:"//cercal-io.disqus.com/embed.js",disqusConfig:function(){this.page.identifier="campos-customizados-no-painel-do-joomla",this.page.title="Campos Customizados no painel do Joomla",this.page.url="https://jpcercal.com/campos-customizados-no-painel-do-joomla/"}})})</script> <script src=https://jpcercal.com/vendor/js/disqus-loader.min.js></script> 